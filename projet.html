<html> <!-- https://developers.google.com/chart/interactive/docs/gallery/scatterchart !-->
  <head>
  	<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

  </head>

  <body>
    <!--<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>!-->
    
	<!--
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);

/*
		var requestJson = 'donneesStatiquesToulouse.json';
		var request = new XMLHttpRequest();
		request.open('GET', requestJson);
		request.responseType = 'json';
		request.send();
		*/
		$.getJSON('donneesStatiquesToulouse.json', function(data){
				
			drawChart(data);
		
		});
		/*
		request.onload = function() {
			var donneesJson = request.response;
			drawChart(donneesJson);
		}*/
		
      function drawChart(donneesJson) {
        var data = donneesJson['longitude', 'latitude'];

        var options = {
          title: 'Age vs. Weight comparison',
          hAxis: {title: 'Longitude', minValue: 0, maxValue: 15},
          vAxis: {title: 'Latitude', minValue: 0, maxValue: 15},
          legend: 'none'
        };

        var chart = new google.visualization.ScatterChart(document.getElementById('chart_div'));

        chart.draw(data, options);
      }
    </script>

    !-->
	<div id="graphDiv">
	    <script>
			Plotly.d3.csv('https://raw.githubusercontent.com/bcdunbar/datasets/master/meteorites_subset.csv', function(err, rows){

			  var classArray = unpack(rows, 'class');
			  var classes = [...new Set(classArray)];

			  function unpack(rows, key) {
			    return rows.map(function(row) { return row[key]; });
			  }

			  var data = classes.map(function(classes) {
			    var rowsFiltered = rows.filter(function(row) {
			        return (row.class === classes);
			    });
			    return {
			       type: 'scattermapbox',
			       name: classes,
			       lat: unpack(rowsFiltered, 'reclat'),
			       lon: unpack(rowsFiltered, 'reclong')
			    };
			  });

			  var layout = {
				 title: 'Meteorite Landing Locations',
				 font: {
					 color: 'white'
				 },
			    dragmode: 'zoom',
			    mapbox: {
			      center: {
			        lat: 38.03697222,
			        lon: -90.70916722
			      },
			      domain: {
			        x: [0, 1],
			        y: [0, 1]
			      },
			      style: 'dark',
			      zoom: 1
			    },
			    margin: {
			      r: 20,
			      t: 40,
			      b: 20,
			      l: 20,
			      pad: 0
			    },
			    paper_bgcolor: '#191A1A',
			    plot_bgcolor: '#191A1A',
			    showlegend: true,
				 annotations: [{
					 x: 0,
			       y: 0,
			       xref: 'paper',
			       yref: 'paper',
					 text: 'Source: NASA',
					 showarrow: false
				 }]
			  };

			  Plotly.setPlotConfig({
			    mapboxAccessToken: 'enter access token here'
			  });

			  Plotly.plot('graphDiv', data, layout);
			});
	    </script>
	</div>
    <!-- <div id="chart_div" style="width: 900px; height: 500px;"></div> !-->
  </body>
</html>